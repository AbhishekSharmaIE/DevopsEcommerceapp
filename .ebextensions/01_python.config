option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: application.py
  aws:elasticbeanstalk:application:environment:
    FLASK_APP: application.py
    FLASK_ENV: production
    PORT: 5000
    PYTHONPATH: "/var/app/current:$PYTHONPATH"
  aws:elasticbeanstalk:container:python:staticfiles:
    /static/: static/

container_commands:
  01_install_requirements:
    command: "pip install -r requirements.txt"
  02_migrate_db:
    command: "flask db upgrade"
  03_start_app:
    command: "gunicorn --bind 0.0.0.0:5000 --workers 3 --timeout 120 application:app"
  04_chmod_app:
    command: "chmod +x application.py" 